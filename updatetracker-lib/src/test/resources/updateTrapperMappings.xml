<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC
        "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
        "http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">

<hibernate-mapping>
    <database-object>
        <create>create index memberships_objects_idx on PUBLIC.MEMBERSHIPS (OBJECTS)</create>
        <drop>drop index membership_objects_idx if exists</drop>
    </database-object>

    <database-object>
        <create>create index membership_records_idx on PUBLIC.MEMBERSHIPS (RECORD_VIEWANGLE,RECORD_ENTRYPID,RECORD_COLLECTION)</create>
        <drop>drop index membership_records_idx if exists</drop>
    </database-object>


    <database-object>
        <create>create index entrypid_idx on PUBLIC.RECORDS (ENTRYPID)</create>
        <drop>drop index entrypid_idx if exists</drop>
    </database-object>

    <database-object>
        <create>create index inactive_all_idx on PUBLIC.RECORDS (inactive, VIEWANGLE, COLLECTION)</create>
        <drop>drop index inactive_all_idx if exists</drop>
    </database-object>

    <database-object>
        <create>create index active_all_notnull_idx on PUBLIC.RECORDS (active, VIEWANGLE, COLLECTION)</create>
        <drop>drop index active_all_notnull_idx if exists</drop>
        <dialect-scope name="org.hibernate.dialect.HSQLDialect"/>
    </database-object>
    <database-object>
        <create>create index active_all_notnull_idx on PUBLIC.RECORDS (active, VIEWANGLE, COLLECTION) WHERE active is
            not null
        </create>
        <drop>drop index active_all_notnull_idx if exists</drop>
        <dialect-scope name="org.hibernate.dialect.PostgreSQL9Dialect"/>
    </database-object>

    <database-object>
        <create>create index deleted_all_notnull_idx on PUBLIC.RECORDS (deleted, VIEWANGLE, COLLECTION)</create>
        <drop>drop index deleted_all_notnull_idx if exists</drop>
        <dialect-scope name="org.hibernate.dialect.HSQLDialect"/>
    </database-object>
    <database-object>
        <create>create index deleted_all_notnull_idx on PUBLIC.RECORDS (deleted, VIEWANGLE, COLLECTION) WHERE deleted is not null</create>
        <drop>drop index deleted_all_notnull_idx if exists</drop>
        <dialect-scope name="org.hibernate.dialect.PostgreSQL9Dialect"/>
    </database-object>

</hibernate-mapping>